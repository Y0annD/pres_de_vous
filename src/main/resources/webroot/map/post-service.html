/**
 * Created by florent on 09/06/15.
 */
<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">

<polymer-element name="post-service" attributes="posts">
<template>
    <style>
        :host {
            display: none;
        }
    </style>
    <iron-ajax
        auto
        url="../insta/48.3341578/-4.418471"
        handle-as="json"
        on-response="postsLoaded">
    </iron-ajax>
</template>
<script>
    Polymer({
        is: 'post-service',

        properties: {
            posts: {
                type: Array,
                value: []
            }
        },

        created: function() {
            this.posts = [];
        },

        postsLoaded: function(request) {
            // Make a copy of the loaded data
            this.posts = request.detail.response;
            console.log('postsLoaded');
            console.log(this.posts);
        },

        /**
         * Update the service with the current favorite value.
         * (Two-way data binding updates the favorite value
         * stored locally.) If this was a real service, this
         * method would do something useful.
         *
         * @method setFavorite
         * @param uid {Number} Unique ID for post.
         * @param isFavorite {Boolean} True if the user marked this post as a favorite.
         */
        setFavorite: function(uid, isFavorite) {
            // no service backend, just log the change
            console.log('Favorite changed: ' + uid + ", now: " + isFavorite);
        }
    });
</script>