/**
* Created by florent on 11/06/15.
*/
<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/google-map/google-map.html">

<link rel="import" href="post-service.html">
<link rel="import" href="post-card.html">

<dom-module id="pic-map">
    <style>
        :host {
        }
    </style>
    <template>
        <!-- <post-service prov="google" lat="{{lat}}" lng="{{lng}}" posts="{{posts.google}}"></post-service> -->
        <post-service prov="twitter" lat="{{lat}}" lng="{{lng}}" posts="{{posts.twitter}}"></post-service>
        <!-- <post-service prov="insta" lat="{{lat}}" lng="{{lng}}" posts="{{posts.insta}}"></post-service> -->
		
        <google-map disable-default-ui fit-to-markers latitude="{{lat}}" longitude="{{lng}}" zoom="15">
			
            <template is="dom-repeat" items="{{posts.twitter.results}}">
                <google-map-marker
					latitude="{{item.location.latitude}}"
					longitude="{{item.location.longitude}}"
					title="{{item.text}}">
						
					<post-card
						favorite="{{item.favorite}}"
						on-favorite-tap="{{handleFavorite}}"
						hidden?="{{show == 'favorites' && !post.favorite}}">
						
						<img class="round" src="{{item.author.profile_picture}}" width="70" height="70">
						<h2>{{item.author.username}}</h2>
						<p>{{item.text}}</p><br /><br />
						<img src="{{item.link}}" alt="{{item.text}}" />
							
					</post-card>
					
                </google-map-marker>
            </template>
			
            <!-- <template is="dom-repeat" items="{{posts.insta.data}}">
                <google-map-marker
					latitude="{{item.location.latitude}}"
					longitude="{{item.location.longitude}}"
					title="{{item.location.name}}">
					
                    <post-card
                        favorite="{{item.favorite}}"
                        on-favorite-tap="{{handleFavorite}}"
                        hidden?="{{show == 'favorites' && !post.favorite}}">
						
                        <img class="round" src="{{item.user.profile_picture}}" width="70" height="70">
                        <h2>{{item.user.username}}</h2>
                        <p>{{item.text}}</p><br /><br />
                        <img src="{{item.images.low_resolution.url}}" alt="{{item.location.name}}" />
						
                    </post-card>
					
                </google-map-marker>
            </template> -->
			
        </google-map>
    </template>
    <script>
        Polymer({
            is: 'pic-map',

            properties: {
                posts: {
                    type: Object,
                    value: {}
                },
                lat: {
                    type: Number,
                    value: 0
                },
                lng: {
                    type: Number,
                    value: 0
                }
            }
        });
    </script>
</dom-module>
